{# Tag cloud / alt navigation without Eleventy-specific filters. #}
{% if collections and collections.all %}
  {# Build a unique tag map: { tagName: true } #}
  {% set tagMap = {} %}
  {% for item in collections.all %}
    {% if item.data and item.data.tags %}
      {% for t in item.data.tags %}
        {% if t != "post" and t != "posts" %}
          {% set tagMap = tagMap | merge({ (t): true }) %}
        {% endif %}
      {% endfor %}
    {% endif %}
  {% endfor %}

  {# Turn the map into a list of [key, value] pairs sorted by key #}
  {% set tagList = tagMap | dictsort %}

  {% if tagList | length %}
    <div class="card mb-8">
      <h3 class="mb-4">Explore by tag</h3>
      {% for pair in tagList %}
        {% set tag = pair[0] %}
        <a class="tag" href="/tags/{{ tag | slugify }}/">{{ tag }}</a>
      {% endfor %}
    </div>
  {% endif %}
{% endif %}
